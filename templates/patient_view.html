{% extends 'base.html' %}

{% block content %}
<h2>Patient Details</h2>

<div class="patient-info card">
    <h3>{{ patient[1] }}</h3>
    <div class="info-grid">
        <div class="info-item">
            <strong>ID:</strong> {{ patient[0] }}
        </div>
        <div class="info-item">
            <strong>Date of Birth:</strong> {{ patient[2] }}
        </div>
        <div class="info-item">
            <strong>Gender:</strong> {{ patient[3] }}
        </div>
        <div class="info-item">
            <strong>Contact:</strong> {{ patient[4] }}
        </div>
        <div class="info-item">
            <strong>Address:</strong> {{ patient[5] }}
        </div>
        <div class="info-item full-width">
            <strong>Medical History:</strong>
            <p>{{ patient[6] }}</p>
        </div>
    </div>

    <div class="actions">
        <a href="{{ url_for('edit_patient', id=patient[0]) }}" class="btn btn-warning">Edit</a>
        <a href="{{ url_for('patients') }}" class="btn btn-secondary">Back to List</a>
    </div>
</div>

<h3>Appointments</h3>
{% if appointments %}
<table>
    <tr>
        <th>ID</th>
        <th>Doctor</th>
        <th>Date & Time</th>
        <th>Status</th>
    </tr>
    {% for appointment in appointments %}
    <tr>
        <td>{{ appointment[0] }}</td>
        <td>Doctor ID: {{ appointment[2] }}</td>
        <td>{{ appointment[3] }}</td>
        <td>{{ appointment[4] }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No appointments found.</p>
{% endif %}

<h3>Prescriptions</h3>
{% if prescriptions %}
<table>
    <tr>
        <th>ID</th>
        <th>Doctor</th>
        <th>Medication</th>
        <th>Dosage</th>
        <th>Date Issued</th>
    </tr>
    {% for prescription in prescriptions %}
    <tr>
        <td>{{ prescription[0] }}</td>
        <td>Doctor ID: {{ prescription[2] }}</td>
        <td>{{ prescription[3] }}</td>
        <td>{{ prescription[4] }}</td>
        <td>{{ prescription[5] }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No prescriptions found.</p>
{% endif %}

<h3>Bills</h3>
{% if bills %}
<table>
    <tr>
        <th>ID</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Created At</th>
    </tr>
    {% for bill in bills %}
    <tr>
        <td>{{ bill[0] }}</td>
        <td>${{ bill[2] }}</td>
        <td>{{ bill[3] }}</td>
        <td>{{ bill[4] }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No bills found.</p>
{% endif %}

{% endblock %}